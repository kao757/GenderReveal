<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ジェンダーリビールのようなもの</title>
  <style>
body {
  font-family: "Rounded Mplus 1c", "Hiragino Maru Gothic ProN", "Yu Gothic", sans-serif;
  text-align: center;
  background-color: #fff8e7; /* ベースのクリーム色 */

  background-image:
    /* 横方向の白い帯 */
    linear-gradient(rgba(255, 255, 255, 0.6) 50%, transparent 50%),
    /* 縦方向の白い帯 */
    linear-gradient(90deg, rgba(255, 255, 255, 0.6) 50%, transparent 50%);

  background-size: 40px 40px; /* チェックの大きさ */
}

    h1 {
      margin-top: 30px;
    }
    #wheel-container {
      position: relative;
      width: 300px;
      height: 300px;
      margin: 40px auto;
    }
    #wheel {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 5px solid #333;
      transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    }
    #pointer {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%) rotate(180deg);
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 20px solid red;
    }
    #buttons {
      margin-top: 20px;
    }
    button {
      font-size: 18px;
      padding: 10px 20px;
      margin: 0 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>2026年3月20日予定日</h1>
  <h1>BOY or GIRL？</h1>

  <div id="wheel-container">
    <div id="pointer"></div>
    <canvas id="wheel"></canvas>
  </div>

  <div id="buttons">
    <button id="startBtn">スタート</button>
    <button id="stopBtn" disabled>ストップ</button>
  </div>

  <script>
    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");
    const size = 300; //canvas.width = canvas.height = 300;
    const center = size / 2;
    const segments = ["BOY", "GIRL", "BOY", "GIRL", "BOY", "GIRL"];
    const colors = ["#87CEFA", "#FFB6C1"];
    const anglePerSegment = 2 * Math.PI / segments.length;

    canvas.width = size;
    canvas.height = size;

    /* ルーレット描画 */
    function drawWheel() {
      ctx.clearRect(0, 0, size, size);
      for (let i = 0; i < segments.length; i++) {
        const startAngle = i * anglePerSegment;
        const endAngle = startAngle + anglePerSegment;

        // 扇形の描画
        ctx.beginPath();
        ctx.moveTo(center, center);
        ctx.fillStyle = colors[i % 2];
        ctx.arc(center, center, center, startAngle, endAngle);
        ctx.closePath();
        ctx.fill();

        // テキストの描画
        ctx.save();
        ctx.translate(center, center);
        ctx.rotate(startAngle + anglePerSegment / 2);
        ctx.textAlign = "center";
        ctx.fillStyle = "#000";
        ctx.font = "bold 18px sans-serif";
        ctx.fillText(segments[i], center * 0.65, 8); // 扇形の内側に配置
        ctx.restore();
      }
    }

    drawWheel();

    let rotation = 0;
    let spinning = false;
    let spinInterval;

    const startBtn = document.getElementById("startBtn");
    const stopBtn = document.getElementById("stopBtn");

    startBtn.addEventListener("click", () => {
      if (spinning) return;
      spinning = true;
      startBtn.disabled = true;
      stopBtn.disabled = false;

      spinInterval = setInterval(() => {
        rotation += 10;
        canvas.style.transform = `rotate(${rotation}deg)`;
      }, 20);
    });

    stopBtn.addEventListener("click", () => {
      if (!spinning) return;
      clearInterval(spinInterval);
      spinning = false;
      startBtn.disabled = false;
      stopBtn.disabled = true;

      canvas.style.transition = "none";
      canvas.style.transform = `rotate(${rotation}deg)`;
      canvas.offsetHeight; // ★ スマホで transition を確実に反映させる
  
      // 「BOY」に止まるように調整（インデックス0 = 0度）
      // 「GIRL」に止まるときは （インデックス60）
      const fullRotations = 5;
      const targetAngle = 0;
      const finalRotation = fullRotations * 360 + targetAngle;

      canvas.style.transition = "transform 3s ease-out";
      canvas.style.transform = `rotate(${finalRotation}deg)`;

      setTimeout(() => {
        alert("「BOY」が生まれます！");
        rotation = finalRotation % 360;
        canvas.style.transition = "none";
      }, 3000);
    }); 
 
  </script>
</body>
</html>
